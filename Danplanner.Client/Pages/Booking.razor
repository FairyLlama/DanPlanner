@page "/booking"
@rendermode InteractiveServer
@using System.Runtime.CompilerServices
@using Danplanner.Shared.Models
@using Danplanner.Client.Components
@inject IBookingService BookingService

<DatePicker StartDateChanged="HandleStartDateChange" EndDateChanged="HandleEndDateChange"/>
@if(startDate is not null && endDate is not null){
    <GuestCounter GuestCountCallback="HandleGuestCountChanged"/>
}
@if(GuestCount is not null){
    <FieldPicker
        SelectedFieldNumberCallback="HandleFieldNumberChanged"
        SelectedFieldCallback="HandleFieldTypeChanged"
        GuestAmount="GuestCount"/>
}

    <CottageAddon/>

<GrassField/>
<Discount/>

@code {
    @*Kalender booking*@
    private DateOnly? startDate;
    private DateOnly? endDate;

    private void HandleStartDateChange(DateTime? date)
    {
        startDate = DateOnly.FromDateTime(date.GetValueOrDefault());
    }

    private void HandleEndDateChange(DateTime? date)
    {
        endDate = DateOnly.FromDateTime(date.GetValueOrDefault());
    }

    
    @*Antal gæster*@
    private int? GuestCount;
    private void HandleGuestCountChanged(int? count){
        GuestCount = count;
    }

    @*Pladser*@
    @*Græs eller hytteplads*@
    private ProductType? FieldType;
    private void HandleFieldTypeChanged(ProductType? field){
        FieldType = field;
    }

    @*Plads nummer på kort*@
    private int? FieldNumber;
    private void HandleFieldNumberChanged(int? fieldnumber){
        FieldNumber = fieldnumber;
    }

}

